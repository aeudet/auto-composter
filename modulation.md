- Home key set at start

WHEN TO MODULATE CHECK:
- Modulation check for each letter (A,B,C,D,etc) Will effect every application of letter.
	- if yes, modulation every instance of letter in relation to home key
	- 1 in 8 chance to modulate on letter
	- Determine type of modulation
	- parallel key modulation
	- relative key modulation
	- neighbour key modulation
	- near key \ foreign key modulation


- Modulation check for each instance of letter
	
	- Truck driver modulation
	- Shift up or down a certain amount of semitones
	- 1 in 20 chance modulation
	- markov chain check for odds update and type 


TYPES of Modulation:

- PARALLEL KEY MODULATION
	- Shift Major/Minor key on same tonic root
	- May require last chord of previous to be set to a pivot chord. Pivot chord may be tacked on at end of progression. (ii - IV :| V :|)


- RELATIVE KEY MODULATION
	- Shift from Major to Minor, or vice versa to the relative key of opposite mode. 
	- For Major key, take tonic and move down 3 semi-tones. For Minor, take root and move up 3 semi-tones. 
	- The vi in major is tonic in relative minor
	- Use pre-tonic (V, IV, ii) chord to get back to Major from Minor

- NEIGHBOUR KEY MODULATION
	- Shift to keys next to home key in circle of fifths.
	- VARIANT: Shift to neighbour and change mode

- Near-Key Modulation
	- Shift from home key to key 2 steps in either direction away in circle of fiths
	- Shift from home key to key 3 steps in either direction away in circle of fifths


- Foreign-Key Modulation
	- Shift to random key.

- KEY SHIFT or Truck Driver (half or whole step up or down)


End chord of previous section may have to be altered to a pivot chord in case of modulation






Modulation Types:

+1 (half-step up)
-1 (half-step down)

+2 (whole-step up)
-2 (whole-step down)

-3 (major to minor) check key state
+3 (minor to major) check key state

±3 to ±11



PIVOT CHORDS

- Check if secton modulates. If yes, add pivot chords at end of progression.
- ALT: if section is only played once, replace last chord of progression
- Check the type of modulation used. Each section has it's own pool of pivot chords
- Print pivot chords as ||: I | IV :| V :|| x5

